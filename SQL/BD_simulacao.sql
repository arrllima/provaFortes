/******************************************************************************/
/***          Generated by IBExpert 2010.03.19 15/09/2019 14:34:40          ***/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES NONE;

CREATE DATABASE 'C:\Phoenix\Pacuja\SIAM10_PACUJA.FDB'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 4096
DEFAULT CHARACTER SET NONE;



/******************************************************************************/
/***                                 Tables                                 ***/
/******************************************************************************/



CREATE TABLE ALUNO (
    CODIGO  INTEGER NOT NULL,
    NOME    VARCHAR(30)
);

CREATE TABLE DISCIPLINA (
    CODIGO  INTEGER NOT NULL,
    NOME    VARCHAR(30)
);

CREATE TABLE MATRICULADO (
    TURMA_ID  INTEGER NOT NULL,
    ALUNO_ID  INTEGER NOT NULL,
    NOTA1     DECIMAL(15,2),
    NOTA2     DECIMAL(15,2),
    NOTA3     DECIMAL(15,2)
);

CREATE TABLE PROFESSOR (
    CODIGO  INTEGER NOT NULL,
    NOME    VARCHAR(30)
);

CREATE TABLE TURMA (
    CODIGO         INTEGER NOT NULL,
    PROFESSOR_ID   INTEGER,
    DISCIPLINA_ID  INTEGER,
    DATAINICIO     DATE,
    DATATERMINO    DATE
);

INSERT INTO ALUNO (CODIGO, NOME) VALUES (1, 'JOAO CANDIDO MENDES');
INSERT INTO ALUNO (CODIGO, NOME) VALUES (2, 'PEDRO PAULO MEDEIROS');
INSERT INTO ALUNO (CODIGO, NOME) VALUES (3, 'ALEX GONCALVES');
INSERT INTO ALUNO (CODIGO, NOME) VALUES (4, 'KARLA SILVA');
INSERT INTO ALUNO (CODIGO, NOME) VALUES (5, 'ANDRE REIS');

COMMIT WORK;

INSERT INTO DISCIPLINA (CODIGO, NOME) VALUES (1, 'BANCO DE DADOS');
INSERT INTO DISCIPLINA (CODIGO, NOME) VALUES (2, 'ESTRUTURA DE DADOS');
INSERT INTO DISCIPLINA (CODIGO, NOME) VALUES (3, 'CONTABILIDADE');
INSERT INTO DISCIPLINA (CODIGO, NOME) VALUES (4, 'HIPERMIDIA');
INSERT INTO DISCIPLINA (CODIGO, NOME) VALUES (5, 'INGLES TECNICO');
INSERT INTO DISCIPLINA (CODIGO, NOME) VALUES (6, 'SISTEMAS OPERACIONAIS');

COMMIT WORK;

INSERT INTO PROFESSOR (CODIGO, NOME) VALUES (1, 'FELIPE COSTA');
INSERT INTO PROFESSOR (CODIGO, NOME) VALUES (2, 'JOANA DARK');
INSERT INTO PROFESSOR (CODIGO, NOME) VALUES (3, 'MAURO NAVES');
INSERT INTO PROFESSOR (CODIGO, NOME) VALUES (4, 'SILVANA RODRIGUES');
INSERT INTO PROFESSOR (CODIGO, NOME) VALUES (5, 'PAULA CORREIA');
INSERT INTO PROFESSOR (CODIGO, NOME) VALUES (6, 'Francisco Ferreira Chagas');

COMMIT WORK;

INSERT INTO TURMA (CODIGO, PROFESSOR_ID, DISCIPLINA_ID, DATAINICIO, DATATERMINO) VALUES (1, 1, 1, '2008-02-01', '2008-06-30');
INSERT INTO TURMA (CODIGO, PROFESSOR_ID, DISCIPLINA_ID, DATAINICIO, DATATERMINO) VALUES (2, 1, 1, '2008-08-01', '2008-12-30');
INSERT INTO TURMA (CODIGO, PROFESSOR_ID, DISCIPLINA_ID, DATAINICIO, DATATERMINO) VALUES (3, 2, 2, '2009-02-01', '2009-06-30');
INSERT INTO TURMA (CODIGO, PROFESSOR_ID, DISCIPLINA_ID, DATAINICIO, DATATERMINO) VALUES (4, 2, 2, '2010-02-01', '2010-06-30');
INSERT INTO TURMA (CODIGO, PROFESSOR_ID, DISCIPLINA_ID, DATAINICIO, DATATERMINO) VALUES (5, 6, 3, '2011-02-01', '2011-06-30');
INSERT INTO TURMA (CODIGO, PROFESSOR_ID, DISCIPLINA_ID, DATAINICIO, DATATERMINO) VALUES (6, 6, 4, '2012-02-01', '2012-06-30');
INSERT INTO TURMA (CODIGO, PROFESSOR_ID, DISCIPLINA_ID, DATAINICIO, DATATERMINO) VALUES (7, 2, 2, '2013-02-01', '2013-06-30');

COMMIT WORK;

INSERT INTO MATRICULADO (TURMA_ID, ALUNO_ID, NOTA1, NOTA2, NOTA3) VALUES (1, 1, 6, 6, 10);
INSERT INTO MATRICULADO (TURMA_ID, ALUNO_ID, NOTA1, NOTA2, NOTA3) VALUES (1, 4, 4, 4, 5);
INSERT INTO MATRICULADO (TURMA_ID, ALUNO_ID, NOTA1, NOTA2, NOTA3) VALUES (3, 4, 7, 7, 8);
INSERT INTO MATRICULADO (TURMA_ID, ALUNO_ID, NOTA1, NOTA2, NOTA3) VALUES (5, 2, 2, 5, 2);
INSERT INTO MATRICULADO (TURMA_ID, ALUNO_ID, NOTA1, NOTA2, NOTA3) VALUES (5, 3, 6, 1, 8);
INSERT INTO MATRICULADO (TURMA_ID, ALUNO_ID, NOTA1, NOTA2, NOTA3) VALUES (1, 5, 3, 3, 8);
INSERT INTO MATRICULADO (TURMA_ID, ALUNO_ID, NOTA1, NOTA2, NOTA3) VALUES (2, 5, 4, 4, 7);

COMMIT WORK;



/******************************************************************************/
/***                              Primary Keys                              ***/
/******************************************************************************/

ALTER TABLE ALUNO ADD CONSTRAINT PK_ALUNO PRIMARY KEY (CODIGO);
ALTER TABLE DISCIPLINA ADD CONSTRAINT PK_DISCIPLINA PRIMARY KEY (CODIGO);
ALTER TABLE MATRICULADO ADD CONSTRAINT PK_MATRICULADO PRIMARY KEY (TURMA_ID, ALUNO_ID);
ALTER TABLE PROFESSOR ADD CONSTRAINT PK_PROFESSOR PRIMARY KEY (CODIGO);
ALTER TABLE TURMA ADD CONSTRAINT PK_TURMA PRIMARY KEY (CODIGO);


/******************************************************************************/
/***                              Foreign Keys                              ***/
/******************************************************************************/

ALTER TABLE MATRICULADO ADD FOREIGN KEY (TURMA_ID) REFERENCES TURMA (CODIGO);
ALTER TABLE MATRICULADO ADD FOREIGN KEY (ALUNO_ID) REFERENCES ALUNO (CODIGO);
ALTER TABLE TURMA ADD FOREIGN KEY (PROFESSOR_ID) REFERENCES PROFESSOR (CODIGO);
ALTER TABLE TURMA ADD FOREIGN KEY (DISCIPLINA_ID) REFERENCES DISCIPLINA (CODIGO);
